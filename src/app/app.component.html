<div style="text-align:center" [style.display]="isDisplay? 'block': 'none'">
  <h1>
   Jira Web Sprint Card Generator !! 
  </h1>
</div>
<div style="text-align:center" [style.display]="isError? 'block': 'none'" class="alert alert-danger">
  <h5>Error : {{error}}</h5>
</div>
<div class="row custom-row" [style.display]="isDisplay? 'block': 'none'">
  <div class="col-sm-5 custom-container jumbotron">

    <form [formGroup]="loginForm" (submit)="onSubmit()">
      <div class="form-group">
        <label for="url">Jira Url</label>
        <div [ngClass]="{'alert alert-danger':loginForm.controls.url.invalid && loginForm.controls.url.dirty, 'has-success': !loginForm.controls.url.errors}">
          <input type="text" name="url" class="form-control" formControlName="url" />
          <ul class="help-block">
            <li *ngIf="(loginForm.controls.url.errors?.required && loginForm.controls.url.dirty)">
              Required
            </li>
            <li *ngIf="(loginForm.controls.url.errors?.pattern && loginForm.controls.url.dirty)">
              Url must start with http:// or https://
            </li>
          </ul>
        </div>
      </div>
      <div class="form-group">
        <label for="username">Jira Username</label>
        <div [ngClass]="{'alert alert-danger':(loginForm.controls.username.errors && loginForm.controls.username.dirty), 'has-success': !loginForm.controls.username.errors}">
          <input type="text" name="username" class="form-control" formControlName="username" />
          <ul class="help-block">
            <li *ngIf="(loginForm.controls.username.errors?.required && loginForm.controls.username.dirty)">
              Required
            </li>
          </ul>
        </div>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <div [ngClass]="{'alert alert-danger':(loginForm.controls.password.errors && loginForm.controls.password.dirty), 'has-success': !loginForm.controls.password.errors}">
          <input type="password" name="password" class="form-control" formControlName="password" />
          <ul class="help-block">
            <li *ngIf="(loginForm.controls.password.errors?.required && loginForm.controls.password.dirty)">
              Required
            </li>
          </ul>
        </div>
      </div>
      <div class="form-group">
        <label for="jql">Jira Query (JQL)</label>
        <div [ngClass]="{'alert alert-danger':(loginForm.controls.jql.errors && loginForm.controls.jql.dirty), 'has-success': !loginForm.controls.jql.errors}">
          <input type="text" name="jql" class="form-control" formControlName="jql" />
          <ul class="help-block">
            <li *ngIf="(loginForm.controls.jql.errors?.required && loginForm.controls.jql.dirty)">
              Required
            </li>
          </ul>
        </div>
      </div>
      <section style="text-align:center"><h3> Sprint Card Details</h3></section>
      <div class="form-group">
          <label for="fieldname">Jira Issue Fieldname</label>
          <div [ngClass]="{'alert alert-danger':(loginForm.controls.fieldname.errors && loginForm.controls.fieldname.dirty), 'has-success': !loginForm.controls.fieldname.errors}">
            <input type="color" name="fieldname" class="form-control" formControlName="fieldname" />
            <ul class="help-block">
              <li *ngIf="(loginForm.controls.fieldname.errors?.required && loginForm.controls.fieldname.dirty)">
                Required
              </li>
            </ul>
          </div>
        </div>
        
              <!-- <div class="form-group">
        <dual-list  class ="form-control" [source]="source" [(destination)]="confirmed"></dual-list> </div> -->
      <input [disabled]="!loginForm.valid" type="submit" value="submit" class="btn btn-primary" />
    </form>
    <form [formGroup]="listForm" (submit)="onAdd()"> 
        <div class="form-group">
            <label for="addfield">Add Story Field to Display in Card</label>
            <!-- <div [ngClass]="{'alert alert-danger':loginForm.controls.addfield.invalid && loginForm.controls.addfield.dirty, 'has-success': !loginForm.controls.addfield.errors}"> -->
              <input type="text" name="addfield" class="form-control" formControlName="addfield" />
              <!-- <ul class="help-block">
                <li *ngIf="(loginForm.controls.addfield.errors?.pattern && loginForm.controls.addfield.dirty)">
                  Field should contain name and keyname in json. e.g:- (Story ID : key)
                </li>
              </ul> -->
            <!-- </div> -->
        </div>
            <input [disabled]="!listForm.valid" type="submit" value="Add" class="btn btn-primary" />
          </form>
          <ul><li *ngFor="let field of source">{{field}}</li></ul>
  </div>

</div>

<div class="row custom-row" style="padding-left: 10px">
  <div *ngFor="let issue of story?.issues;" class = "sprintCard">
    <div class = "sprintCardDiv" [style.background-color]="issue.fields.issuetype.name == 'Defect' ? '#DA2433': issue.fields.issuetype.name == 'Sub-Task' ? '#17C65D': '#20ECF0' ">
      <img class = "sprintCardImg" [src]="issue.fields.issuetype.name == 'Defect' ? 'assets\\img\\Defect.png': issue.fields.issuetype.name == 'Sub-Task' ? 'assets\\img\\SubTask.png':'assets\\img\\UserStory.png'">
      <h1 class ="sprintCardH1">{{ issue.key }}</h1>
      <h2 class = "sprintCardH2">{{ issue.fields.summary }}</h2>
      <h3 class = "sprintCardH3">{{ issue.fields.customfield_10232 }}</h3>
    </div>
  </div>
</div>
